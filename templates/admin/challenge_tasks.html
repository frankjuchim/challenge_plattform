{% extends "base.html" %}
{% block content %}

<h1 class="mb-4">ğŸ“‹ Aufgaben â€“ {{ challenge.title }}</h1>

<div class="event-card mb-4">

  <form method="post">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
    <div class="mb-3">
      <label class="form-label">Titel</label>
      <input type="text" name="title" class="form-control" required>
    </div>

    <div class="mb-3">
      <label class="form-label">Aufgabentext</label>
      <textarea name="description" class="form-control" rows="4" placeholder="Was sollen die Teams umsetzen?"
        required></textarea>
    </div>

    <div class="mb-3">
      <label class="form-label">Maximale Punkte</label>
      <input type="number" name="max_points" class="form-control" value="10" min="1" required>
    </div>

    <button class="btn btn-primary">
      â• Aufgabe hinzufÃ¼gen
    </button>
  </form>


</div>

<div class="event-card">

  <h3 class="mb-3">Vorhandene Aufgaben</h3>

  {% if tasks|length == 0 %}
  <p class="text-secondary">Noch keine Aufgaben.</p>
  {% endif %}

  <ul class="list-group list-group-flush">
    {% for t in tasks %}
    <li class="list-group-item bg-transparent text-light d-flex justify-content-between align-items-center">
      <div>
        <strong>{{ t.title }}</strong>
        <span class="text-secondary ms-2">
          ({{ t.max_points }} Punkte)
        </span>
      </div>

      <form method="post" action="{{ url_for('admin.task_delete', tid=t.id) }}"
        onsubmit="return confirm('Aufgabe wirklich lÃ¶schen?');">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
        <button class="btn btn-outline-danger btn-sm">
          ğŸ—‘
        </button>
      </form>
    </li>
    {% endfor %}
  </ul>

</div>

<a href="{{ url_for('admin.challenges_list') }}" class="text-secondary mt-4 d-block">
  â† zurÃ¼ck zu Challenges
</a>

{% endblock %}